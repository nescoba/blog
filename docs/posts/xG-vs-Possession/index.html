<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.282">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nicolas Escobar">

<title>Home - Beyond xG tables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/nescoba/"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/nicoEscobarV"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Beyond xG tables</h1>
                          <div class="quarto-categories">
                <div class="quarto-category">soccer</div>
                <div class="quarto-category">analytics</div>
                <div class="quarto-category">xG</div>
              </div>
                  </div>
  </div>
    
  



  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Nicolas Escobar </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">8/19/2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>xG has changed the soccer analytics landscape, there is no question about it. It’s such a good metric. It’s easy to explain and it is widely available. It has allowed us to quantify offensive output and by doing so, it has advanced our understanding of all aspects of the game. It’s also so intuitive that it has gone mainstream. It’s now part of the conversation in regular soccer coverage.</p>
<p>The thing with it is the same thing that happens with stuff like <span class="math inline">\(R^2\)</span> or <span class="math inline">\(p\)</span>-values. It’s just a number. A summary statistic. But people sometimes forget about that and expect xG to tell the whole story. It’s true: xG paints a much better picture of a game than goals or shots on target. But it’s still not the whole picture. The context around which it is discussed matters.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 2
   team         xG
   &lt;fct&gt;     &lt;dbl&gt;
 1 mancity    89  
 2 liverpool  89.1
 3 chelsea    67.2
 4 tottenham  65.1
 5 arsenal    59.8
 6 manunited  54.7
 7 westham    49.9
 8 leicester  51.3
 9 brighton   46.1
10 wolves     35.9</code></pre>
</div>
</div>
<div class="cell">

</div>
<p><img src="../../posts/xG-vs-Possession/plot.png" class="img-fluid"></p>
<p>Consider the table and the plot above. In the table, we have each of the top 10 teams in the English Premier League, season 2021-2022. For each team, I computed the total xG they generated throughout the season, using data from fbref. In the plot, we have the same teams, except for each one we have a boxplot of the xG’s they generated in each game of the season. In both cases, teams are ordered by their final position in the league.</p>
<p>It’s not like the table and the plot tell completely different stories. Generally speaking, a higher total xG was associated with a better position in the table. And the total xG of Manchester City and Liverpool were noticeably higher than that of the rest of the teams.</p>
<p>But the table can be just a little misleading. It seems to indicate that Liverpool had basically the same offensive output across the season. But the plot tells a more complicated story. We can infer from the boxplots that Manchester City’s distribution of xG is skewed to the right whereas Liverpool’s is skewed to the left. This means that the former achieved its total xG by creating a lot of it in a few games while having many games with lower tolls. On the other hand, the latter got it by creating high xG more consistently.</p>
<p>All of this to say: xG is great, but just quoting xG tables is lazy. It hides part of the story, especially when there is variance involved. Plots are usually a good alternative, but they also have their limitations. Soccer is complex, that’s part of the beauty, and it can not be reduced to a number.</p>
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| warning: false -->
<!-- top10 %>% -->
<!--     ggplot(aes(x = team, y = Poss, fill = team)) + -->
<!--         geom_boxplot()+ -->
<!--         theme(legend.position="none")  -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| warning: false -->
<!-- #| output: false -->
<!-- top10 %>%  -->
<!--     group_by(team) %>% -->
<!--     summarise(sdXG = IQR(xG)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| warning: false -->
<!-- #| output: false -->
<!-- ggplot(top4, aes(x = Poss, y = xG)) + -->
<!--     geom_point() + -->
<!--     facet_wrap(~team) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| warning: false -->
<!-- #| output: false -->
<!-- ################## -->
<!-- M0 = lmer(xG ~ 1 + (Poss - 1|team), top10) -->
<!-- M0 -->
<!-- summary(M0) -->
<!-- coef(M0) -->
<!-- ######## -->
<!-- m.mancity = lm(xG ~ Poss , mancity) -->
<!-- m.mancity -->
<!-- ###### -->
<!-- model = lm(xG ~ Poss +team, top10) -->
<!-- summary(model) -->
<!-- ``` -->
<!-- ![](/posts/xG-vs-Possession/xgagainstpossesion.png) -->



</main> <!-- /main -->
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>